{% extends 'base.html' %}


{% block additionalhead %}
  <link href="https://unpkg.com/tabulator-tables@4.5.1/dist/css/materialize/tabulator_materialize.min.css" rel="stylesheet">
  <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.5.1/dist/js/tabulator.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>


  <script>

      window.onload = function(){
          var ajaxURL= '/api/user/{{user.id}}/events';
          createEventTable("#eventstable", ajaxURL, true);
          createEventTable("#pasteventstable", ajaxURL, false);


      {% if(current_user.can_create_events()) %}
              var ajaxURLLeader= '/api/leader/{{user.id}}/events';
              createEventTable("#eventsleadertable", ajaxURLLeader, true);
              createEventTable("#pasteventsleadertable", ajaxURLLeader, false);
      {% endif %}
    }
  </script>
  <script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}

{% block header %}
<h1>Mes collectives</h1>
{% endblock %}

{% block content %}
<div class="panel" id="profile">
    <h3>Mes collectives</h3>

    <h4>Sorties à venir</h4>
    <div id="eventstable">
    </div>

    {% if(current_user.can_create_events()) %}
        <h4>Sorties à venir en tant qu'encadrant</h4>
        <div id="eventsleadertable">
        </div>
    {% endif %}

    <h4>Sorties effectuées</h4>
    <div id="pasteventstable">
    </div>

    {% if(current_user.can_create_events()) %}
        <h4>Sorties effectuées en tant qu'encadrant</h4>
        <div id="pasteventsleadertable">
        </div>
    {% endif %}
</div>

{% endblock %}
