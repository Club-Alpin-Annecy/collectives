{% extends 'base.html' %}

{% import 'macros.html' as macros with context %}

{% block additionalhead %}
  <script src="{{ url_for('static', filename='js/index.js') }}"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/event/event.css') }}">
{% endblock %}

{% block header %}
<h1>{% block title %} {{user.full_name()}} {% endblock %}</h1>
{% endblock %}

{% block content %}
<div class="panel solidpanel" id="eventdetail">
    <h3>{{user.full_name()}}</h3>

    <h4>Informations de contact</h4>
    <ul>
        <li><b>Email :</b> {{user.mail}}</li>
        <li><b>Téléphone :</b> {{user.phone}}</li>
    </ul>
    {% if user == current_user %}
    <a class="button" href="{{url_for('root.update_user')}}">Modifier mes informations</a>
    {% elif current_user.is_admin() %}
    <a class="button" href="{{url_for('administration.manage_user', user_id=user.id)}}">Modifier l'utilisateur</a>
    {% endif %}

    <h4>Sorties à venir</h4>
    <div id="eventlist" class="panel" style="display:inline">
        {% for event in next_events %}
            {{ macros.eventitem(event[1]) }}
        {% else %}
            <li>Aucune sortie à venir</li>
        {% endfor %}
    </div>

    <h4>Sorties effectuées</h4>
    <div id="eventlist" class="panel" style="display:inline">
        {% for event in past_events %}
            {{ macros.eventitem(event[1]) }}
        {% else %}
            <li>Aucune sortie encadrée jusqu'à présent</li>
        {% endfor %}
    </div>
</div>

{% endblock %}
