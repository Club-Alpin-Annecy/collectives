{% macro details_row(title, value) -%}
  <tr>
      <td class="key">{{title}}</td>
      <td class="value">{{value}}</td>
  </tr>
{%- endmacro %}

{% extends 'base.html' %}

{% block additionalhead %}
{% endblock %}

{% block header %}
  <h1>{% block title %}Détails d'un paiement{% endblock %}</h1>
{% endblock %}

{% block content %}
<div class="panel" id="administration">
  <h4>Détails du paiement</h4>

  {% if payment.is_offline() and payment.registration %}
  <p>
    <a class="button" href="{{ url_for('payment.report_offline', registration_id = payment.registration_id, payment_id=payment.id)}}">
        <img class="icon" src="{{ url_for('static', filename='img/icon/ionicon/md-create.svg') }}"/>
        Editer le paiement hors-ligne
    </a>
  </p>
  {%endif%}

  <table id="payment_details">
    {{ details_row("Test", payment.item.title) }}
    {{ details_row("Événement", event.title) }}
    {{ details_row("Objet du paiement", payment.item.title) }}
    {{ details_row("Tarif", payment.price.title) }}
    {{ details_row("Adhérent", payment.creditor.full_name()) }}
    {% if payment.registration %}
      {{ details_row("Inscription associée", payment.registration.status.display_name()) }}
    {% endif %}
    {{ details_row("Notifié par", payment.reporter.full_name()) }}
    {{ details_row("État", payment.status.display_name()) }}
    {{ details_row("Prix facturé", format_currency(payment.amount_charged)) }}
    {{ details_row("Prix payé", format_currency(payment.amount_paid)) }}
    {{ details_row("Type", payment.payment_type.display_name()) }}
    {{ details_row("Date de création", format_datetime(payment.creation_time)) }}
    {{ details_row("Date de finalisation", format_datetime(payment.finalization_time)) }}
    {{ details_row("Token", payment.processor_token) }}
    {{ details_row("Metadata", payment.raw_metadata) }}
  </table>

</div>
{% endblock %}

